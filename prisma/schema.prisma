generator client {
  provider      = "prisma-client-js"
  // output        = "node_modules/@prisma/client/.prisma/client"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Org {
  id      String  @id @default(auto()) @map("_id") @db.ObjectId
  ownerId String? @db.ObjectId
  owner   User?   @relation(fields: [ownerId], references: [id])
  week    String?
}

model User {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  role        String  @default("GUEST")
  // UNIQUE
  email       String  @unique
  // LOGIN
  displayName String?
  providerId  String?
  phoneNumber String?
  photoURL    String?
  uid         String?
  // ADMIN 
  orgId       Int?
  Org         Org[]
}

model Event {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  title     String
  start     DateTime
  end       DateTime
  allDay    Boolean?
  status    String   @default("ACTIVE")
  // OVERDUE | CANCELED | DELETED (no enums in sqlite)
  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?  @db.ObjectId
}

model Service {
  title  String
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  events Event[]
}
